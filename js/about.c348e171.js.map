{"version":3,"file":"js/about.c348e171.js","mappings":"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","sources":["webpack://souther_cotizaciones/./src/views/AboutView.vue","webpack://souther_cotizaciones/src/views/AboutView.vue","webpack://souther_cotizaciones/./src/views/AboutView.vue?1712","webpack://souther_cotizaciones/./src/views/AboutView.vue?296c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',[_c('input',{attrs:{\"id\":\"input\",\"type\":\"file\"},on:{\"change\":function($event){return _vm.uploadExcelFile($event)}}}),(!!_vm.firstWorksheet)?_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.handleDownloadExcel}},[_vm._v(\" Download \")]):_vm._e()],1),_c('div',{staticClass:\"overflow-auto\"},[_c('table',{staticClass:\"sheet-table caption\",attrs:{\"id\":\"Table2XLSX\"}},[_c('tbody',[_vm._l((_vm.sheetRowsTender),function(row,i){return [_c('WorkSheetTenderRow',{key:`tender_${i}`,attrs:{\"row-data\":row,\"worksheet-ref\":_vm.firstWorksheetRef}})]}),_vm._l((_vm.sheetRowsProviders),function(row,j){return [_c('WorkSheetProviderRow',{key:`provider_${j}`,attrs:{\"row-data\":row,\"worksheet-ref\":_vm.firstWorksheetRef},on:{\"edit:factor-landed\":function($event){return _vm.handleEditFactorLanded($event)}}})]}),_vm._l((_vm.sheetRowsProducts),function(row,h){return [_c('WorkSheetProductRow',{key:`product_${h}`,attrs:{\"row-data\":row,\"worksheet-ref\":_vm.firstWorksheetRef}})]})],2)])]),(!!_vm.cellDataToEdit)?_c('CellModalEdit',{attrs:{\"item\":_vm.cellDataToEdit},on:{\"click:edit-cell\":_vm.handleSaveEditFactorLanded},model:{value:(_vm.showCellModalEdit),callback:function ($$v) {_vm.showCellModalEdit=$$v},expression:\"showCellModalEdit\"}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div>\n      <input\n        id=\"input\"\n        type=\"file\"\n        @change=\"uploadExcelFile($event)\"\n      >\n      <v-btn\n        v-if=\"!!firstWorksheet\"\n        color=\"primary\"\n        @click=\"handleDownloadExcel\"\n      >\n        Download\n      </v-btn>\n    </div>\n    <div class=\"overflow-auto\">\n      <table\n        id=\"Table2XLSX\"\n        class=\"sheet-table caption\"\n      >\n        <tbody>\n          <template v-for=\"(row, i) in sheetRowsTender\">\n            <WorkSheetTenderRow\n              :key=\"`tender_${i}`\"\n              :row-data=\"row\"\n              :worksheet-ref=\"firstWorksheetRef\"\n            />\n          </template>\n          <template v-for=\"(row, j) in sheetRowsProviders\">\n            <WorkSheetProviderRow\n              :key=\"`provider_${j}`\"\n              :row-data=\"row\"\n              :worksheet-ref=\"firstWorksheetRef\"\n              @edit:factor-landed=\"handleEditFactorLanded($event)\"\n            />\n          </template>\n          <template v-for=\"(row, h) in sheetRowsProducts\">\n            <WorkSheetProductRow\n              :key=\"`product_${h}`\"\n              :row-data=\"row\"\n              :worksheet-ref=\"firstWorksheetRef\"\n            />\n          </template>\n        </tbody>\n      </table>\n    </div>\n    <CellModalEdit\n      v-if=\"!!cellDataToEdit\"\n      v-model=\"showCellModalEdit\"\n      :item=\"cellDataToEdit\"\n      @click:edit-cell=\"handleSaveEditFactorLanded\"\n    />\n  </div>\n</template>\n\n<script>\nimport WorkSheetTenderRow from '@/components/WorkSheetTenderRow.vue'\nimport WorkSheetProviderRow from '@/components/WorkSheetProviderRow.vue'\nimport WorkSheetProductRow from '@/components/WorkSheetProductRow.vue'\nimport CellModalEdit from '@/components/CellModalEdit.vue'\nimport addRowsOrColumns from '@/helpers/addRowsOrColumns'\nimport getRowsParsed from '@/helpers/getRowsParsed'\nimport getTenderRows from '@/helpers/getTenderRows'\nimport getProviderRows from '@/helpers/getProviderRows'\nimport getProductRows from '@/helpers/getProductRows'\nimport getFirstWorksheetRowsCalculated from '@/helpers/getFirstWorksheetRowsCalculated'\n// import getProductByProvider from '@/helpers/getProductByProvider'\nimport getLandedPricesByProduct from '@/helpers/getLandedPricesByProduct'\n// import { PACKING_COST, FACTOR_LANDED } from '@/constants/settings'\n\nimport { read, utils, writeFile } from 'xlsx-js-style'\n\nexport default {\n  name: 'HomeView',\n  components: {\n    WorkSheetTenderRow,\n    WorkSheetProductRow,\n    WorkSheetProviderRow,\n    CellModalEdit\n  },\n  data () {\n    return {\n      excelData: [],\n      excelFile: null,\n      sheetRows: [],\n      sheetRowsTender: [],\n      sheetRowsProviders: [],\n      sheetRowsProducts: [],\n      firstWorksheet: null,\n      firstWorksheetRows: [],\n      firstWorksheetRef: null,\n      showCellModalEdit: false,\n      cellDataToEdit: null\n    }\n  },\n  methods: {\n    uploadExcelFile (event) {\n      const selectedXlsxFile = event.target.files[0]\n\n      const fileReader = new FileReader()\n\n      fileReader.onload = () => {\n        const arrayBuffer = fileReader.result\n\n        const workbook = read(arrayBuffer)\n        const firstWorksheet = workbook.Sheets[workbook.SheetNames[0]]\n        const firstWorksheetData = utils.sheet_to_json(firstWorksheet, { header: 1, nullError: true })\n\n        const newWorksheetJson = addRowsOrColumns(firstWorksheetData)\n        const newFirstWorksheet = utils.aoa_to_sheet(newWorksheetJson)\n\n        this.createNewWorksheet(newFirstWorksheet)\n      }\n      fileReader.readAsArrayBuffer(selectedXlsxFile)\n    },\n    createNewWorksheet (firstWorksheet) {\n      this.firstWorksheetRows = utils.sheet_to_json(firstWorksheet, { header: 1, nullError: true })\n      const range = utils.decode_range(firstWorksheet['!ref'] || 'A1')\n      this.firstWorksheetRef = {\n        ref: firstWorksheet['!ref'],\n        cols: range.e.c,\n        rows: range.e.r\n      }\n      this.firstWorksheetRows = getFirstWorksheetRowsCalculated(this.firstWorksheetRows)\n      // console.log('xxxx', x)\n      const rowsparsed = getRowsParsed(this.firstWorksheetRows, range.e.c)\n      this.sheetRowsTender = getTenderRows(rowsparsed)\n      this.sheetRowsProducts = getProductRows(rowsparsed)\n      this.sheetRowsProviders = getProviderRows(rowsparsed, this.sheetRowsProducts)\n\n      /*  */\n      this.firstWorksheet = firstWorksheet\n    },\n    handleDownloadExcel () {\n      const wb = utils.book_new()\n      utils.book_append_sheet(wb, this.firstWorksheet, 'Sheet1')\n      writeFile(wb, 'souther_xxx.xlsx')\n    },\n    handleEditFactorLanded (item) {\n      this.cellDataToEdit = item\n      this.showCellModalEdit = true\n    },\n    handleSaveEditFactorLanded (item) {\n      const cellAddress = utils.encode_cell({\n        r: item.rowIndex,\n        c: item.colIndex\n      })\n      this.firstWorksheet[cellAddress].v = item.value\n\n      const landedPrices = getLandedPricesByProduct(this.sheetRowsProducts, item.providerId - 1, item.value)\n\n      landedPrices.forEach((element, i) => {\n        const landedPriceAddress = utils.encode_cell({\n          r: element.rowIndex,\n          c: element.colIndex\n        })\n\n        this.firstWorksheet[landedPriceAddress].v = element.value\n      })\n\n      this.createNewWorksheet(this.firstWorksheet)\n      this.cellDataToEdit = null\n      this.showCellModalEdit = false\n    }\n  }\n}\n\n</script>\n<style lang=\"scss\" scoped>\n.sheet-table {\n  border:1px solid black;\n  border-collapse:collapse;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AboutView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AboutView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AboutView.vue?vue&type=template&id=0e97987e&scoped=true&\"\nimport script from \"./AboutView.vue?vue&type=script&lang=js&\"\nexport * from \"./AboutView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AboutView.vue?vue&type=style&index=0&id=0e97987e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e97987e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["_c","_self","attrs","_vm","staticClass","key","row","cellDataToEdit","model","callback","showCellModalEdit","expression","staticRenderFns","name","components","WorkSheetTenderRow","WorkSheetProductRow","WorkSheetProviderRow","CellModalEdit","data","excelData","excelFile","sheetRows","sheetRowsTender","sheetRowsProviders","sheetRowsProducts","firstWorksheet","firstWorksheetRows","firstWorksheetRef","methods","uploadExcelFile","event","selectedXlsxFile","target","files","fileReader","FileReader","onload","arrayBuffer","result","workbook","read","Sheets","SheetNames","firstWorksheetData","utils","sheet_to_json","header","nullError","newWorksheetJson","addRowsOrColumns","newFirstWorksheet","aoa_to_sheet","createNewWorksheet","readAsArrayBuffer","range","decode_range","ref","cols","e","c","rows","r","getFirstWorksheetRowsCalculated","rowsparsed","getRowsParsed","getTenderRows","getProductRows","getProviderRows","handleDownloadExcel","wb","book_new","book_append_sheet","writeFile","handleEditFactorLanded","item","handleSaveEditFactorLanded","cellAddress","encode_cell","rowIndex","colIndex","v","value","landedPrices","getLandedPricesByProduct","providerId","forEach","element","i","landedPriceAddress","component","render"],"sourceRoot":""}